============================= test session starts ==============================
platform linux -- Python 3.13.11, pytest-9.0.2, pluggy-1.6.0
rootdir: /home/chrnv/neurograph
configfile: pytest.ini (WARNING: ignoring pytest config in pyproject.toml!)
plugins: anyio-4.12.1, cov-7.0.0, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 441 items

tests/unit/api/test_api_keys_router.py ....................              [  4%]
tests/unit/api/test_api_keys_storage.py .......................          [  9%]
tests/unit/api/test_auth_router.py ................................      [ 17%]
tests/unit/api/test_cache_stats_router.py ...............                [ 20%]
tests/unit/api/test_cdna_router.py ..............................        [ 27%]
tests/unit/api/test_dependencies.py ....................                 [ 31%]
tests/unit/api/test_error_handlers.py ...........                        [ 34%]
tests/unit/api/test_grid_router.py .........................             [ 39%]
tests/unit/api/test_health_router.py ...F.F................              [ 44%]
tests/unit/api/test_jwt.py ......................                        [ 49%]
tests/unit/api/test_metrics_router.py .................                  [ 53%]
tests/unit/api/test_middleware.py .................                      [ 57%]
tests/unit/api/test_modules_router.py .......................            [ 62%]
tests/unit/api/test_query_router.py ................                     [ 66%]
tests/unit/api/test_rate_limit.py ......................                 [ 71%]
tests/unit/api/test_status_router.py ...................                 [ 75%]
tests/unit/api/test_tokens_router.py .F...F.F.F.F.F.F.F.F.F.F.F.F.F      [ 82%]
tests/unit/api/test_websocket_router.py ..............                   [ 85%]
tests/unit/test_action_controller_core.py ...                            [ 86%]
tests/unit/test_action_executors.py ...                                  [ 87%]
tests/unit/test_adapters.py ..........                                   [ 89%]
tests/unit/test_encoders.py .....                                        [ 90%]
tests/unit/test_gateway_core.py .......                                  [ 92%]
tests/unit/test_gateway_models.py ....                                   [ 92%]
tests/unit/test_jupyter_integration.py ................                  [ 96%]
tests/unit/test_sensor_registry.py ......                                [ 97%]
tests/unit/test_subscription_filter.py .........                         [100%]

=================================== FAILURES ===================================
E   AssertionError: assert 'runtime_metrics' in {'components': {'cdna_storage': {'profile_count': 1, 'status': 'healthy'}, 'grid_storage': {'message': 'Grid operation...pu_percent': 0.0, 'memory_mb': 105.24, 'memory_percent': 1.79, 'threads': 10}, 'uptime_seconds': 4.84495210647583, ...}
/home/chrnv/neurograph-os-mvp/tests/unit/api/test_health_router.py:110: AssertionError: assert 'runtime_metrics' in {'components': {'cdna_storage': {'profile_count': 1, 'status': 'healthy'}, 'grid_storage': {'message': 'Grid operation...pu_percent': 0.0, 'memory_mb': 105.24, 'memory_percent': 1.79, 'threads': 10}, 'uptime_seconds': 4.84495210647583, ...}
E   AssertionError: assert 'unhealthy' == 'degraded'
      
      - degraded
      + unhealthy
/home/chrnv/neurograph-os-mvp/tests/unit/api/test_health_router.py:158: AssertionError: assert 'unhealthy' == 'degraded'
E   ValueError: Duplicated timeseries in CollectorRegistry: {'neurograph_ws_connections_total'}
/home/chrnv/.var/app/com.vscodium.codium/data/python/lib/python3.13/site-packages/prometheus_client/registry.py:43: ValueError: Duplicated timeseries in CollectorRegistry: {'neurograph_ws_connections_total'}
E   ValueError: Duplicated timeseries in CollectorRegistry: {'neurograph_ws_connections_total'}
/home/chrnv/.var/app/com.vscodium.codium/data/python/lib/python3.13/site-packages/prometheus_client/registry.py:43: ValueError: Duplicated timeseries in CollectorRegistry: {'neurograph_ws_connections_total'}
E   ValueError: Duplicated timeseries in CollectorRegistry: {'neurograph_ws_connections_total'}
/home/chrnv/.var/app/com.vscodium.codium/data/python/lib/python3.13/site-packages/prometheus_client/registry.py:43: ValueError: Duplicated timeseries in CollectorRegistry: {'neurograph_ws_connections_total'}
E   ValueError: Duplicated timeseries in CollectorRegistry: {'neurograph_ws_connections_total'}
/home/chrnv/.var/app/com.vscodium.codium/data/python/lib/python3.13/site-packages/prometheus_client/registry.py:43: ValueError: Duplicated timeseries in CollectorRegistry: {'neurograph_ws_connections_total'}
E   ValueError: Duplicated timeseries in CollectorRegistry: {'neurograph_ws_connections_total'}
/home/chrnv/.var/app/com.vscodium.codium/data/python/lib/python3.13/site-packages/prometheus_client/registry.py:43: ValueError: Duplicated timeseries in CollectorRegistry: {'neurograph_ws_connections_total'}
E   ValueError: Duplicated timeseries in CollectorRegistry: {'neurograph_ws_connections_total'}
/home/chrnv/.var/app/com.vscodium.codium/data/python/lib/python3.13/site-packages/prometheus_client/registry.py:43: ValueError: Duplicated timeseries in CollectorRegistry: {'neurograph_ws_connections_total'}
E   ValueError: Duplicated timeseries in CollectorRegistry: {'neurograph_ws_connections_total'}
/home/chrnv/.var/app/com.vscodium.codium/data/python/lib/python3.13/site-packages/prometheus_client/registry.py:43: ValueError: Duplicated timeseries in CollectorRegistry: {'neurograph_ws_connections_total'}
E   ValueError: Duplicated timeseries in CollectorRegistry: {'neurograph_ws_connections_total'}
/home/chrnv/.var/app/com.vscodium.codium/data/python/lib/python3.13/site-packages/prometheus_client/registry.py:43: ValueError: Duplicated timeseries in CollectorRegistry: {'neurograph_ws_connections_total'}
E   ValueError: Duplicated timeseries in CollectorRegistry: {'neurograph_ws_connections_total'}
/home/chrnv/.var/app/com.vscodium.codium/data/python/lib/python3.13/site-packages/prometheus_client/registry.py:43: ValueError: Duplicated timeseries in CollectorRegistry: {'neurograph_ws_connections_total'}
E   ValueError: Duplicated timeseries in CollectorRegistry: {'neurograph_ws_connections_total'}
/home/chrnv/.var/app/com.vscodium.codium/data/python/lib/python3.13/site-packages/prometheus_client/registry.py:43: ValueError: Duplicated timeseries in CollectorRegistry: {'neurograph_ws_connections_total'}
E   ValueError: Duplicated timeseries in CollectorRegistry: {'neurograph_ws_connections_total'}
/home/chrnv/.var/app/com.vscodium.codium/data/python/lib/python3.13/site-packages/prometheus_client/registry.py:43: ValueError: Duplicated timeseries in CollectorRegistry: {'neurograph_ws_connections_total'}
E   ValueError: Duplicated timeseries in CollectorRegistry: {'neurograph_ws_connections_total'}
/home/chrnv/.var/app/com.vscodium.codium/data/python/lib/python3.13/site-packages/prometheus_client/registry.py:43: ValueError: Duplicated timeseries in CollectorRegistry: {'neurograph_ws_connections_total'}
E   ValueError: Duplicated timeseries in CollectorRegistry: {'neurograph_ws_connections_total'}
/home/chrnv/.var/app/com.vscodium.codium/data/python/lib/python3.13/site-packages/prometheus_client/registry.py:43: ValueError: Duplicated timeseries in CollectorRegistry: {'neurograph_ws_connections_total'}
E   ValueError: Duplicated timeseries in CollectorRegistry: {'neurograph_ws_connections_total'}
/home/chrnv/.var/app/com.vscodium.codium/data/python/lib/python3.13/site-packages/prometheus_client/registry.py:43: ValueError: Duplicated timeseries in CollectorRegistry: {'neurograph_ws_connections_total'}
=============================== warnings summary ===============================
src/api/models/response.py:13
tests/unit/api/test_tokens_router.py::TestTokensRouter::test_create_token_all_coordinates
  /home/chrnv/neurograph/src/api/models/response.py:13: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class MetaData(BaseModel):

../.var/app/com.vscodium.codium/data/python/lib/python3.13/site-packages/pydantic/_internal/_generate_schema.py:319
tests/unit/api/test_tokens_router.py::TestTokensRouter::test_create_token_all_coordinates
  /home/chrnv/.var/app/com.vscodium.codium/data/python/lib/python3.13/site-packages/pydantic/_internal/_generate_schema.py:319: PydanticDeprecatedSince20: `json_encoders` is deprecated. See https://docs.pydantic.dev/2.12/concepts/serialization/#custom-serializers for alternatives. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    warnings.warn(

src/api/models/query.py:24
tests/unit/api/test_tokens_router.py::TestTokensRouter::test_create_token_all_coordinates
  /home/chrnv/neurograph/src/api/models/query.py:24: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class QueryRequest(BaseModel):

src/api/models/query.py:51
tests/unit/api/test_tokens_router.py::TestTokensRouter::test_create_token_all_coordinates
  /home/chrnv/neurograph/src/api/models/query.py:51: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class TokenResult(BaseModel):

src/api/models/query.py:86
tests/unit/api/test_tokens_router.py::TestTokensRouter::test_create_token_all_coordinates
  /home/chrnv/neurograph/src/api/models/query.py:86: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class QueryResponse(BaseModel):

src/api/models/status.py:39
tests/unit/api/test_tokens_router.py::TestTokensRouter::test_create_token_all_coordinates
  /home/chrnv/neurograph/src/api/models/status.py:39: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class StatusResponse(BaseModel):

src/api/models/status.py:86
tests/unit/api/test_tokens_router.py::TestTokensRouter::test_create_token_all_coordinates
  /home/chrnv/neurograph/src/api/models/status.py:86: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ReadinessResponse(BaseModel):

src/api/models/token.py:19
tests/unit/api/test_tokens_router.py::TestTokensRouter::test_create_token_all_coordinates
  /home/chrnv/neurograph/src/api/models/token.py:19: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class TokenCreateRequest(BaseModel):

src/api/models/token.py:71
tests/unit/api/test_tokens_router.py::TestTokensRouter::test_create_token_all_coordinates
  /home/chrnv/neurograph/src/api/models/token.py:71: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class TokenResponse(BaseModel):

src/api/models/token.py:121
tests/unit/api/test_tokens_router.py::TestTokensRouter::test_create_token_all_coordinates
  /home/chrnv/neurograph/src/api/models/token.py:121: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class TokenListResponse(BaseModel):

src/api/models/grid.py:12
tests/unit/api/test_tokens_router.py::TestTokensRouter::test_create_token_all_coordinates
  /home/chrnv/neurograph/src/api/models/grid.py:12: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class GridConfigRequest(BaseModel):

src/api/models/grid.py:44
tests/unit/api/test_tokens_router.py::TestTokensRouter::test_create_token_all_coordinates
  /home/chrnv/neurograph/src/api/models/grid.py:44: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class GridCreateResponse(BaseModel):

src/api/models/grid.py:65
tests/unit/api/test_tokens_router.py::TestTokensRouter::test_create_token_all_coordinates
  /home/chrnv/neurograph/src/api/models/grid.py:65: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class GridInfoResponse(BaseModel):

src/api/models/grid.py:86
tests/unit/api/test_tokens_router.py::TestTokensRouter::test_create_token_all_coordinates
  /home/chrnv/neurograph/src/api/models/grid.py:86: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class GridStatusResponse(BaseModel):

src/api/models/grid.py:112
tests/unit/api/test_tokens_router.py::TestTokensRouter::test_create_token_all_coordinates
  /home/chrnv/neurograph/src/api/models/grid.py:112: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class NeighborResult(BaseModel):

src/api/models/grid.py:127
tests/unit/api/test_tokens_router.py::TestTokensRouter::test_create_token_all_coordinates
  /home/chrnv/neurograph/src/api/models/grid.py:127: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class NeighborsResponse(BaseModel):

src/api/models/grid.py:153
tests/unit/api/test_tokens_router.py::TestTokensRouter::test_create_token_all_coordinates
  /home/chrnv/neurograph/src/api/models/grid.py:153: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class RangeQueryResponse(BaseModel):

src/api/models/grid.py:179
tests/unit/api/test_tokens_router.py::TestTokensRouter::test_create_token_all_coordinates
  /home/chrnv/neurograph/src/api/models/grid.py:179: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class FieldInfluenceResponse(BaseModel):

src/api/models/grid.py:200
tests/unit/api/test_tokens_router.py::TestTokensRouter::test_create_token_all_coordinates
  /home/chrnv/neurograph/src/api/models/grid.py:200: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DensityResponse(BaseModel):

src/api/models/cdna.py:12
tests/unit/api/test_tokens_router.py::TestTokensRouter::test_create_token_all_coordinates
  /home/chrnv/neurograph/src/api/models/cdna.py:12: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ProfileInfo(BaseModel):

src/api/models/cdna.py:36
tests/unit/api/test_tokens_router.py::TestTokensRouter::test_create_token_all_coordinates
  /home/chrnv/neurograph/src/api/models/cdna.py:36: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class CDNAConfig(BaseModel):

src/api/models/cdna.py:55
tests/unit/api/test_tokens_router.py::TestTokensRouter::test_create_token_all_coordinates
  /home/chrnv/neurograph/src/api/models/cdna.py:55: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class CDNAUpdateRequest(BaseModel):

src/api/models/cdna.py:76
tests/unit/api/test_tokens_router.py::TestTokensRouter::test_create_token_all_coordinates
  /home/chrnv/neurograph/src/api/models/cdna.py:76: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class CDNAStatusResponse(BaseModel):

src/api/models/cdna.py:102
tests/unit/api/test_tokens_router.py::TestTokensRouter::test_create_token_all_coordinates
  /home/chrnv/neurograph/src/api/models/cdna.py:102: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class CDNAProfilesResponse(BaseModel):

src/api/models/cdna.py:134
tests/unit/api/test_tokens_router.py::TestTokensRouter::test_create_token_all_coordinates
  /home/chrnv/neurograph/src/api/models/cdna.py:134: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class QuarantineStatus(BaseModel):

src/api/models/cdna.py:171
tests/unit/api/test_tokens_router.py::TestTokensRouter::test_create_token_all_coordinates
  /home/chrnv/neurograph/src/api/models/cdna.py:171: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ValidationResult(BaseModel):

src/api/models/cdna.py:188
tests/unit/api/test_tokens_router.py::TestTokensRouter::test_create_token_all_coordinates
  /home/chrnv/neurograph/src/api/models/cdna.py:188: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ValidateRequest(BaseModel):

src/api/models/cdna.py:201
tests/unit/api/test_tokens_router.py::TestTokensRouter::test_create_token_all_coordinates
  /home/chrnv/neurograph/src/api/models/cdna.py:201: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class CDNAHistoryResponse(BaseModel):

src/api/config.py:30
tests/unit/api/test_tokens_router.py::TestTokensRouter::test_create_token_all_coordinates
  /home/chrnv/neurograph/src/api/config.py:30: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class Settings(BaseSettings):

src/api/models/auth.py:30
  /home/chrnv/neurograph/src/api/models/auth.py:30: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class LoginRequest(BaseModel):

src/api/models/auth.py:45
  /home/chrnv/neurograph/src/api/models/auth.py:45: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class LoginResponse(BaseModel):

src/api/models/auth.py:71
  /home/chrnv/neurograph/src/api/models/auth.py:71: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class RefreshTokenRequest(BaseModel):

src/api/models/auth.py:84
  /home/chrnv/neurograph/src/api/models/auth.py:84: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class RefreshTokenResponse(BaseModel):

src/api/models/auth.py:103
  /home/chrnv/neurograph/src/api/models/auth.py:103: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class LogoutRequest(BaseModel):

src/api/models/auth.py:130
  /home/chrnv/neurograph/src/api/models/auth.py:130: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class APIKeyCreate(BaseModel):

src/api/models/auth.py:149
  /home/chrnv/neurograph/src/api/models/auth.py:149: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class APIKeyCreateResponse(BaseModel):

src/api/models/auth.py:172
  /home/chrnv/neurograph/src/api/models/auth.py:172: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ChangePasswordRequest(BaseModel):

src/api/models/modules.py:22
  /home/chrnv/neurograph/src/api/models/modules.py:22: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ModuleInfo(BaseModel):

../.var/app/com.vscodium.codium/data/python/lib/python3.13/site-packages/pydantic/main.py:250: 3 warnings
tests/unit/api/test_api_keys_router.py: 11 warnings
tests/unit/api/test_auth_router.py: 1 warning
tests/unit/api/test_cdna_router.py: 21 warnings
tests/unit/api/test_grid_router.py: 10 warnings
tests/unit/api/test_health_router.py: 9 warnings
tests/unit/api/test_metrics_router.py: 9 warnings
tests/unit/api/test_query_router.py: 15 warnings
tests/unit/api/test_status_router.py: 13 warnings
tests/unit/api/test_tokens_router.py: 5 warnings
  /home/chrnv/.var/app/com.vscodium.codium/data/python/lib/python3.13/site-packages/pydantic/main.py:250: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)

src/gateway/models/source.py:7
src/gateway/models/source.py:7
  /home/chrnv/neurograph/src/gateway/models/source.py:7: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class SignalSource(BaseModel):

src/gateway/models/semantic.py:63
src/gateway/models/semantic.py:63
  /home/chrnv/neurograph/src/gateway/models/semantic.py:63: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class SemanticCore(BaseModel):

src/gateway/models/energy.py:6
src/gateway/models/energy.py:6
  /home/chrnv/neurograph/src/gateway/models/energy.py:6: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class EnergyProfile(BaseModel):

src/gateway/models/temporal.py:7
src/gateway/models/temporal.py:7
  /home/chrnv/neurograph/src/gateway/models/temporal.py:7: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class TemporalBinding(BaseModel):

src/gateway/models/payload.py:7
src/gateway/models/payload.py:7
  /home/chrnv/neurograph/src/gateway/models/payload.py:7: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class RawPayload(BaseModel):

src/gateway/models/result.py:7
src/gateway/models/result.py:7
  /home/chrnv/neurograph/src/gateway/models/result.py:7: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class NeighborInfo(BaseModel):

src/gateway/models/result.py:47
src/gateway/models/result.py:47
  /home/chrnv/neurograph/src/gateway/models/result.py:47: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ProcessingResult(BaseModel):

src/gateway/models/routing.py:7
src/gateway/models/routing.py:7
  /home/chrnv/neurograph/src/gateway/models/routing.py:7: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class RoutingInfo(BaseModel):

src/gateway/models/signal_event.py:16
src/gateway/models/signal_event.py:16
  /home/chrnv/neurograph/src/gateway/models/signal_event.py:16: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class SignalEvent(BaseModel):

tests/unit/api/test_api_keys_router.py::TestCreateAPIKey::test_create_key_success
  /home/chrnv/neurograph-os-mvp/tests/unit/api/test_api_keys_router.py:46: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).

tests/unit/api/test_api_keys_router.py::TestCreateAPIKey::test_create_key_success
  /home/chrnv/neurograph-os-mvp/tests/unit/api/test_api_keys_router.py:47: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).

tests/unit/api/test_api_keys_router.py::TestCreateAPIKey::test_create_key_returns_full_key_once
  /home/chrnv/neurograph-os-mvp/tests/unit/api/test_api_keys_router.py:144: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).

tests/unit/api/test_api_keys_router.py::TestListAPIKeys::test_list_keys_success
  /home/chrnv/neurograph-os-mvp/tests/unit/api/test_api_keys_router.py:183: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).

tests/unit/api/test_api_keys_router.py::TestListAPIKeys::test_list_keys_success
  /home/chrnv/neurograph-os-mvp/tests/unit/api/test_api_keys_router.py:194: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).

tests/unit/api/test_api_keys_router.py::TestListAPIKeys::test_list_keys_success
  /home/chrnv/neurograph-os-mvp/tests/unit/api/test_api_keys_router.py:196: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).

tests/unit/api/test_api_keys_router.py::TestListAPIKeys::test_list_keys_no_full_keys
  /home/chrnv/neurograph-os-mvp/tests/unit/api/test_api_keys_router.py:267: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).

tests/unit/api/test_api_keys_router.py::TestGetAPIKey::test_get_key_success
  /home/chrnv/neurograph-os-mvp/tests/unit/api/test_api_keys_router.py:306: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).

tests/unit/api/test_api_keys_router.py::TestAPIKeysIntegration::test_full_key_lifecycle
  /home/chrnv/neurograph-os-mvp/tests/unit/api/test_api_keys_router.py:499: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).

tests/unit/api/test_api_keys_storage.py: 30 warnings
  /home/chrnv/neurograph/src/api/storage/api_keys.py:101: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    created_at=datetime.utcnow(),

tests/unit/api/test_api_keys_storage.py::TestAPIKeyGeneration::test_generate_key_with_expiration
tests/unit/api/test_api_keys_storage.py::TestAPIKeyVerification::test_verify_expired_key
  /home/chrnv/neurograph/src/api/storage/api_keys.py:92: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    expires_at = datetime.utcnow() + timedelta(days=expires_in_days)

tests/unit/api/test_api_keys_storage.py::TestAPIKeyGeneration::test_generate_key_with_expiration
  /home/chrnv/neurograph-os-mvp/tests/unit/api/test_api_keys_storage.py:69: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).

tests/unit/api/test_api_keys_storage.py::TestAPIKeyVerification::test_verify_valid_key
tests/unit/api/test_api_keys_storage.py::TestAPIKeyDeletion::test_persistence_across_instances
tests/unit/api/test_api_keys_storage.py::TestAPIKeyPersistence::test_persistence_across_instances
  /home/chrnv/neurograph/src/api/storage/api_keys.py:151: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    key_data['last_used_at'] = datetime.utcnow().isoformat()

tests/unit/api/test_api_keys_storage.py::TestAPIKeyVerification::test_verify_expired_key
  /home/chrnv/neurograph/src/api/storage/api_keys.py:147: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    if datetime.utcnow() > expires_at:

tests/unit/api/test_auth_router.py: 21 warnings
tests/unit/api/test_jwt.py: 13 warnings
  /home/chrnv/neurograph/src/api/auth/jwt.py:87: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    now = datetime.utcnow()

tests/unit/api/test_auth_router.py: 21 warnings
tests/unit/api/test_jwt.py: 7 warnings
  /home/chrnv/neurograph/src/api/auth/jwt.py:122: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    now = datetime.utcnow()

tests/unit/api/test_cdna_router.py::TestUpdateCDNAConfig::test_update_config_with_profile
tests/unit/api/test_cdna_router.py::TestUpdateCDNAConfig::test_update_config_with_scales
tests/unit/api/test_cdna_router.py::TestUpdateCDNAConfig::test_update_config_with_validation
  /home/chrnv/neurograph/src/api/routers/cdna.py:196: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    update_data["timestamp"] = datetime.utcnow().isoformat() + "Z"

tests/unit/api/test_cdna_router.py::TestSwitchProfile::test_switch_profile_success
tests/unit/api/test_cdna_router.py::TestCDNAIntegration::test_full_cdna_workflow
  /home/chrnv/neurograph/src/api/routers/cdna.py:399: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat() + "Z"

tests/unit/api/test_cdna_router.py::TestQuarantineStart::test_start_quarantine_success
  /home/chrnv/neurograph/src/api/routers/cdna.py:579: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat() + "Z"

tests/unit/api/test_cdna_router.py::TestQuarantineStop::test_stop_quarantine_success
  /home/chrnv/neurograph/src/api/routers/cdna.py:655: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat() + "Z"

tests/unit/api/test_cdna_router.py::TestExportConfig::test_export_config_success
  /home/chrnv/neurograph/src/api/routers/cdna.py:764: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "exported_at": datetime.utcnow().isoformat() + "Z"

tests/unit/api/test_cdna_router.py::TestExportConfig::test_export_config_success
  /home/chrnv/neurograph/src/api/routers/cdna.py:767: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    filename = f"cdna_export_{datetime.utcnow().strftime('%Y%m%d_%H%M%S')}.json"

tests/unit/api/test_cdna_router.py::TestResetConfig::test_reset_config_success
  /home/chrnv/neurograph/src/api/routers/cdna.py:825: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat() + "Z"

tests/unit/api/test_error_handlers.py::TestValidationExceptionHandler::test_handles_validation_errors
  /home/chrnv/neurograph-os-mvp/tests/unit/api/test_error_handlers.py:144: DeprecationWarning: 'HTTP_422_UNPROCESSABLE_ENTITY' is deprecated. Use 'HTTP_422_UNPROCESSABLE_CONTENT' instead.

tests/unit/api/test_error_handlers.py::TestValidationExceptionHandler::test_formats_error_fields
  /home/chrnv/neurograph-os-mvp/tests/unit/api/test_error_handlers.py:182: DeprecationWarning: 'HTTP_422_UNPROCESSABLE_ENTITY' is deprecated. Use 'HTTP_422_UNPROCESSABLE_CONTENT' instead.

tests/unit/api/test_error_handlers.py::TestValidationExceptionHandler::test_counts_validation_errors
  /home/chrnv/neurograph-os-mvp/tests/unit/api/test_error_handlers.py:214: DeprecationWarning: 'HTTP_422_UNPROCESSABLE_ENTITY' is deprecated. Use 'HTTP_422_UNPROCESSABLE_CONTENT' instead.

tests/unit/api/test_health_router.py::TestBasicHealthCheck::test_health_check_returns_200
tests/unit/api/test_health_router.py::TestBasicHealthCheck::test_health_check_includes_uptime
tests/unit/api/test_health_router.py::TestBasicHealthCheck::test_health_check_includes_version
tests/unit/api/test_health_router.py::TestBasicHealthCheck::test_health_check_includes_runtime_metrics
tests/unit/api/test_health_router.py::TestBasicHealthCheck::test_health_check_status_healthy
tests/unit/api/test_health_router.py::TestBasicHealthCheck::test_health_check_handles_storage_errors
  /home/chrnv/neurograph/src/api/routers/health.py:200: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    response_data = data.dict()

tests/unit/api/test_health_router.py::TestReadinessProbe::test_readiness_returns_200_when_ready
tests/unit/api/test_health_router.py::TestReadinessProbe::test_readiness_marks_startup_complete
tests/unit/api/test_health_router.py::TestHealthProbesIntegration::test_probe_progression
  /home/chrnv/neurograph/src/api/routers/health.py:330: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    return ApiResponse.success_response(data.dict())

tests/unit/api/test_query_router.py: 15 warnings
  /home/chrnv/neurograph/src/api/routers/query.py:81: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    response_data.dict(),

tests/unit/api/test_status_router.py::TestGetStatus::test_get_status_success
tests/unit/api/test_status_router.py::TestGetStatus::test_get_status_includes_components
tests/unit/api/test_status_router.py::TestGetStatus::test_get_status_uptime_measured
tests/unit/api/test_status_router.py::TestGetStatus::test_get_status_uses_cached_metrics
tests/unit/api/test_status_router.py::TestGetStatus::test_get_status_token_count_correct
tests/unit/api/test_status_router.py::TestStatusIntegration::test_status_and_stats_both_work
  /home/chrnv/neurograph/src/api/routers/status.py:126: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    response_data = data.dict()

tests/unit/api/test_status_router.py::TestGetStatus::test_get_status_error_handling
  /home/chrnv/neurograph/src/api/routers/status.py:159: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    response_data = data.dict()

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED tests/unit/api/test_health_router.py::TestBasicHealthCheck::test_health_check_includes_runtime_metrics
FAILED tests/unit/api/test_health_router.py::TestBasicHealthCheck::test_health_check_handles_storage_errors
FAILED tests/unit/api/test_tokens_router.py::TestTokensRouter::test_create_token_all_coordinates
FAILED tests/unit/api/test_tokens_router.py::TestTokensRouter::test_list_tokens_success
FAILED tests/unit/api/test_tokens_router.py::TestTokensRouter::test_list_tokens_pagination
FAILED tests/unit/api/test_tokens_router.py::TestTokensRouter::test_list_tokens_storage_error
FAILED tests/unit/api/test_tokens_router.py::TestTokensRouter::test_get_token_not_found
FAILED tests/unit/api/test_tokens_router.py::TestTokensRouter::test_get_token_storage_error
FAILED tests/unit/api/test_tokens_router.py::TestTokensRouter::test_update_token_coordinates
FAILED tests/unit/api/test_tokens_router.py::TestTokensRouter::test_update_token_permission_denied
FAILED tests/unit/api/test_tokens_router.py::TestTokensRouter::test_delete_token_success
FAILED tests/unit/api/test_tokens_router.py::TestTokensRouter::test_delete_token_permission_denied
FAILED tests/unit/api/test_tokens_router.py::TestTokensRouter::test_create_examples_success
FAILED tests/unit/api/test_tokens_router.py::TestTokensRouter::test_create_examples_storage_error
FAILED tests/unit/api/test_tokens_router.py::TestTokensRouter::test_clear_all_tokens_empty
FAILED tests/unit/api/test_tokens_router.py::TestTokensRouter::test_clear_all_tokens_storage_error
================ 16 failed, 425 passed, 334 warnings in 21.28s =================
